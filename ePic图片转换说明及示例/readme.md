### Pic嵌入式图片格式转换说明及示例

#### 说明
  * 此功能主要用于将已处理过的wbmp,bmp,gif等图片文件进行处理以方便直接嵌入程序FLASH中：
    + 将各图片的数据头部分(图像格式描述， 数据头等)精简并统一，以节省程序FLASH空间
    + 将调色板转换为嵌入系统实际使用的调色板，以减少其转换工作量并直接使用
    + 图片转换后的格式统一为".ePic"后缀，然后可用本软件资源文件合并功能生成.bin文件，以后续处理

#### 脚本第三行功能性掩码说明:
  通过控制功能有效掩码位，可单独提取部分信息，以方便不同的嵌入式应用中使用：
  * 低4位为通用信息：
    +  0x01: 包含数据头，即提取图像组成信息
    +  0x02: 包含调色板信息
    +  0x04: 包含调色板信息时，将图像中的调色板转换为嵌入系统实际使用的调色板
    +  0x08: 包含图片中的图像数据(如wbmp及16bit 24bitbmp格式)信息
  * 高4位根据图像类型决定
    +  0x10: gif时，去除gif默认数据前头，即数据区头为0x21,0xf9,0x04,0x00,0x00,0x00,0x00,,0x00时，将其去提掉
    +  0x20: PNG时，若只仅有1个IDAT数据块与结束校验，则仅保留IDAT数据(头0x06中b7置位)，对简单PNG，此功能可减少24byte数据量
    +  0x40: PNG时，去除数据块中的起始长度，标识与结束的校验码，共8+4字节，此功能建议仅在提取单个数据时使用
#### .ePic格式图片描述
  .ePic格式按顺序，由下部分组成：
  * 0~8个字节的数据头： 数据头元索构成由配置文件决定
  * 0~n字节嵌入系统实际调色板：是否支持调色板，及嵌入系统实际使用的调色板由配置文件决定
  * 各图片格式自已的图片数据：含其压缩解码信息与图像数字信息，直接copy基本中方便处理

#### 0~8字节的数据头
  下述双字节对齐，双字节时，可配置指定编译LSB,MSB对齐方式，以方便嵌入式系统直接结构对齐使用。
  * 0x00: 图片格式描述符： 单字节，现支持：
    + w: 表示wbmp格式
    + b: 表示bmp格式，ePic格式为4位图 转换RGB565调色板时可省>=80字节
    + g: 表示gif格式,支持至全局调色板(一帧图片)，其它当做数据处理
    + n: 表示png格式
    + j: 表示jpg格式(暂不支持)
  * 0x01: 比特数/像素数,单字节:
    + bmp:图像深度: 值为1，2，4，8，16，24，32，
    + wbmp固定为1
    + gif: m(b7有全局调色板)cr(b6~b4,颜色深度-1)s(b3) pixel(b3~0全局调色板个数-1)域
    + png: 颜色类型b5~7与色深信息b4~0 (调色板个数与色深对应)
  * 0x02~0x03: 图像宽度, 16位有符号型,直接提取各种片格式此数据并LSB,MSB对齐
  * 0x04~0x05: 图像高度, 16位有符号型,直接提取各种片格式此数据并LSB,MSB对齐
  * 0x06: 由各图像决定的内容
    + wbmp:固定为0
    + bmp: 图像采用的压缩算法
    + gif: 背景颜色(在全局颜色列表中的索引，如果没有全局颜色列表，该值没有意义)
    + png: b7仅idat数据,扫描方法(b6~5), 滤波器方法(b4~2), 压缩方法(b1~0)
  * 0x07: 调色板信息，由各图像决定的内容：
    + wbmp:固定为0，即无调色板
    + bmp: 使用的调色板中的颜色索引数，0时使用所有
    + gif: 使用的“全局”调色板中的颜色索引数，0时使用所有
    + png: 使用的调色板中的颜色索引数，0时使用所有

#### PNG填充内容使能位
  下述" |"后为对应位ID, 1 << ID获得其掩码
  （高3位：b7:在PLTE和IDAT之前,b6在IDAT之前,b5:不可去除数据块， 低5bit对应使用掩码)
  mapHeader[" PNG"] = 0xc8 |0;//PNG头(ePic默认去除)
  mapHeader["IHDR"] = 0xc8 |1;//文件头数据块(ePic默认去除)
  mapHeader["cHRM"] = 0xe0 |2;//基色和白色点数据块	
  mapHeader["gAMA"] = 0xc0 |3;//图像γ数据块
  mapHeader["sBIT"] = 0xc0 |4;//样本有效位数据块
  mapHeader["PLTE"] = 0x60 |5;//调色板数据块(ePic默认去除)
  mapHeader["bKGD"] = 0xc0 |6;//背景颜色数据块
  mapHeader["hIST"] = 0xc0 |7;//图像直方图数据块
  mapHeader["tRNS"] = 0xc0 |8;//图像透明数据块
  mapHeader["oFFs"] = 0x40 |9;//(专用公共数据块)
  mapHeader["pHYs"] = 0x40 |10;//物理像素尺寸数据块
  mapHeader["sCAL"] = 0x40 |11;//(专用公共数据块)
  mapHeader["IDAT"] = 0x20 |12;//图像数据块
  mapHeader["tIME"] = 0x00 |13;//图像最后修改时间数据块(ePic默认去除)
  mapHeader["tEXt"] = 0x00 |14;//文本信息数据块(ePic默认去除)
  mapHeader["zTXt"] = 0x00 |15;//压缩文本数据块(ePic默认去除)
  mapHeader["fRAc"] = 0x00 |16;//(专用公共数据块)
  mapHeader["gIFg"] = 0x00 |17;//(专用公共数据块)
  mapHeader["gIFt"] = 0x00 |18;//(专用公共数据块)
  mapHeader["gIFx"] = 0x00 |19;//(专用公共数据块)
  mapHeader["IEND"] = 0x00 |20;//最后一个数据块(ePic默认去除)

  无时默认为0xFFEF1FDC： 即无PNG头,识别块,调色板,时间,相关文本等信息(因其编码入了.ePic数据头中),无结束块

#### 示例说明
#### qtn.bmp为一个 4位图片, 不同存储方式：
  qt.bmp: 4位压缩格式
  qt1.bmp: 4位不压缩格式
  qt2.bmp: 8位压缩格式

